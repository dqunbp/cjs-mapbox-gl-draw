_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{"/0+H":function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=s,t.useAmp=function(){return s(r.default.useContext(i.AmpStateContext))};var o,r=(o=n("q1tI"))&&o.__esModule?o:{default:o},i=n("lwAK");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,o=e.hybrid,r=void 0!==o&&o,i=e.hasQuery,s=void 0!==i&&i;return n||r&&s}},"2qu3":function(e,t,n){"use strict";var o=n("lSNA"),r=n("lwsE"),i=n("W8MJ");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}t.__esModule=!0,t.default=void 0;var l,h=(l=n("q1tI"))&&l.__esModule?l:{default:l},d=n("8L3h"),p=n("jwwS");var f=[],y=[],g=!1;function m(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then((function(e){return n.loading=!1,n.loaded=e,e})).catch((function(e){throw n.loading=!1,n.error=e,e})),n}function _(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach((function(o){var r=m(e[o]);r.loading?t.loading=!0:(t.loaded[o]=r.loaded,t.error=r.error),n.push(r.promise),r.promise.then((function(e){t.loaded[o]=e})).catch((function(e){t.error=e}))}))}catch(o){t.error=o}return t.promise=Promise.all(n).then((function(e){return t.loading=!1,e})).catch((function(e){throw t.loading=!1,e})),t}function b(e,t){return h.default.createElement(function(e){return e&&e.__esModule?e.default:e}(e),t)}function v(e,t){var n=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:b,webpack:null,modules:null},t),o=null;function r(){if(!o){var t=new E(e,n);o={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return o.promise()}if(!g&&"function"===typeof n.webpack){var i=n.webpack();y.push((function(e){var t,n=c(i);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(-1!==e.indexOf(o))return r()}}catch(s){n.e(s)}finally{n.f()}}))}var s=function(e,t){r();var i=h.default.useContext(p.LoadableContext),s=(0,d.useSubscription)(o);return h.default.useImperativeHandle(t,(function(){return{retry:o.retry}}),[]),i&&Array.isArray(n.modules)&&n.modules.forEach((function(e){i(e)})),h.default.useMemo((function(){return s.loading||s.error?h.default.createElement(n.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:o.retry}):s.loaded?n.render(s.loaded,e):null}),[e,s])};return s.preload=function(){return r()},s.displayName="LoadableComponent",h.default.forwardRef(s)}var E=function(){function e(t,n){r(this,e),this._loadFn=t,this._opts=n,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}return i(e,[{key:"promise",value:function(){return this._res.promise}},{key:"retry",value:function(){var e=this;this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};var t=this._res,n=this._opts;t.loading&&("number"===typeof n.delay&&(0===n.delay?this._state.pastDelay=!0:this._delay=setTimeout((function(){e._update({pastDelay:!0})}),n.delay)),"number"===typeof n.timeout&&(this._timeout=setTimeout((function(){e._update({timedOut:!0})}),n.timeout))),this._res.promise.then((function(){e._update({}),e._clearTimeouts()})).catch((function(t){e._update({}),e._clearTimeouts()})),this._update({})}},{key:"_update",value:function(e){this._state=a(a({},this._state),{},{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach((function(e){return e()}))}},{key:"_clearTimeouts",value:function(){clearTimeout(this._delay),clearTimeout(this._timeout)}},{key:"getCurrentValue",value:function(){return this._state}},{key:"subscribe",value:function(e){var t=this;return this._callbacks.add(e),function(){t._callbacks.delete(e)}}}]),e}();function O(e){return v(m,e)}function T(e,t){for(var n=[];e.length;){var o=e.pop();n.push(o(t))}return Promise.all(n).then((function(){if(e.length)return T(e,t)}))}O.Map=function(e){if("function"!==typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return v(_,e)},O.preloadAll=function(){return new Promise((function(e,t){T(f).then(e,t)}))},O.preloadReady=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t){var n=function(){return g=!0,t()};T(y,e).then(n,n)}))},window.__NEXT_PRELOADREADY=O.preloadReady;var S=O;t.default=S},"7W2i":function(e,t,n){var o=n("SksO");e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}},"8Kt/":function(e,t,n){"use strict";n("lSNA");t.__esModule=!0,t.defaultHead=l,t.default=void 0;var o,r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=o?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),i=(o=n("Xuae"))&&o.__esModule?o:{default:o},s=n("lwAK"),a=n("FYa8"),c=n("/0+H");function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[r.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(r.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function h(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===r.default.Fragment?e.concat(r.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var d=["name","httpEquiv","charSet","itemProp"];function p(e,t){return e.reduce((function(e,t){var n=r.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(h,[]).reverse().concat(l(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,n=new Set,o={};return function(r){var i=!0;if(r.key&&"number"!==typeof r.key&&r.key.indexOf("$")>0){var s=r.key.slice(r.key.indexOf("$")+1);e.has(s)?i=!1:e.add(s)}switch(r.type){case"title":case"base":t.has(r.type)?i=!1:t.add(r.type);break;case"meta":for(var a=0,c=d.length;a<c;a++){var u=d[a];if(r.props.hasOwnProperty(u))if("charSet"===u)n.has(u)?i=!1:n.add(u);else{var l=r.props[u],h=o[u]||new Set;h.has(l)?i=!1:(h.add(l),o[u]=h)}}}return i}}()).reverse().map((function(e,t){var n=e.key||t;return r.default.cloneElement(e,{key:n})}))}function f(e){var t=e.children,n=(0,r.useContext)(s.AmpStateContext),o=(0,r.useContext)(a.HeadManagerContext);return r.default.createElement(i.default,{reduceComponentsToState:p,headManager:o,inAmpMode:(0,c.isInAmpMode)(n)},t)}f.rewind=function(){};var y=f;t.default=y},"8oxB":function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"===typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function y(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},EbDI:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},FYa8:function(e,t,n){"use strict";var o;t.__esModule=!0,t.HeadManagerContext=void 0;var r=((o=n("q1tI"))&&o.__esModule?o:{default:o}).default.createContext({});t.HeadManagerContext=r},Ijbi:function(e,t,n){var o=n("WkPL");e.exports=function(e){if(Array.isArray(e))return o(e)}},Nsbk:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},PJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},Po9p:function(e,t){},RIqP:function(e,t,n){var o=n("Ijbi"),r=n("EbDI"),i=n("ZhPi"),s=n("Bnag");e.exports=function(e){return o(e)||r(e)||i(e)||s()}},RNiq:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var o=n("q1tI"),r=n.n(o),i=n("8Kt/"),s=n.n(i),a=n("vRNQ"),c=n.n(a),u=(n("YFqc"),n("sTT1")),l=n.n(u),h=n("a6RD"),d=n.n(h),p=r.a.createElement,f=d()((function(){return Promise.all([n.e(3),n.e(10)]).then(n.bind(null,"4YdT"))}),{ssr:!1,loadableGenerated:{webpack:function(){return["4YdT"]},modules:["./map"]}});function y(){var e=Object(o.useState)(null),t=e[0],n=e[1];return Object(o.useEffect)((function(){if(t){var e=new l.a;t.addControl(e)}}),[t]),p("div",{className:c.a.container},p(s.a,null,p("title",null,"Next.js with Mapbox Draw!"),p("link",{rel:"icon",href:"/favicon.ico"}),p("link",{href:"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css",rel:"stylesheet"}),p("link",{rel:"stylesheet",href:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.2.0/mapbox-gl-draw.css",type:"text/css"})),p("h1",null,"CommonJS converted mapbox-gl-draw"),p("div",{className:c.a.main},p(f,{setMapAPI:n})))}},Xuae:function(e,t,n){"use strict";var o=n("RIqP"),r=n("lwsE"),i=n("W8MJ"),s=(n("PJYZ"),n("7W2i")),a=n("a1gu"),c=n("Nsbk");function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return a(this,n)}}t.__esModule=!0,t.default=void 0;var l=n("q1tI"),h=function(e){s(n,e);var t=u(n);function n(e){var i;return r(this,n),(i=t.call(this,e))._hasHeadManager=void 0,i.emitChange=function(){i._hasHeadManager&&i.props.headManager.updateHead(i.props.reduceComponentsToState(o(i.props.headManager.mountedInstances),i.props))},i._hasHeadManager=i.props.headManager&&i.props.headManager.mountedInstances,i}return i(n,[{key:"componentDidMount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:"componentDidUpdate",value:function(){this.emitChange()}},{key:"componentWillUnmount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:"render",value:function(){return null}}]),n}(l.Component);t.default=h},YFqc:function(e,t,n){e.exports=n("cTJO")},a1gu:function(e,t,n){var o=n("cDf5"),r=n("PJYZ");e.exports=function(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?r(e):t}},a6RD:function(e,t,n){"use strict";var o=n("lSNA");function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.__esModule=!0,t.noSSR=c,t.default=function(e,t){var n=s.default,o={loading:function(e){e.error,e.isLoading;return e.pastDelay,null}};e instanceof Promise?o.loader=function(){return e}:"function"===typeof e?o.loader=e:"object"===typeof e&&(o=i(i({},o),e));if(o=i(i({},o),t),"object"===typeof e&&!(e instanceof Promise)&&(e.render&&(o.render=function(t,n){return e.render(n,t)}),e.modules)){n=s.default.Map;var r={},a=e.modules();Object.keys(a).forEach((function(e){var t=a[e];"function"!==typeof t.then?r[e]=t:r[e]=function(){return t.then((function(e){return e.default||e}))}})),o.loader=r}o.loadableGenerated&&delete(o=i(i({},o),o.loadableGenerated)).loadableGenerated;if("boolean"===typeof o.ssr){if(!o.ssr)return delete o.ssr,c(n,o);delete o.ssr}return n(o)};a(n("q1tI"));var s=a(n("2qu3"));function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return delete t.webpack,delete t.modules,e(t)}},cTJO:function(e,t,n){"use strict";var o=n("J4zp"),r=n("284h");t.__esModule=!0,t.default=void 0;var i,s=r(n("q1tI")),a=n("elyg"),c=n("nOHt"),u=new Map,l=window.IntersectionObserver,h={};var d=function(e,t){var n=i||(l?i=new l((function(e){e.forEach((function(e){if(u.has(e.target)){var t=u.get(e.target);(e.isIntersecting||e.intersectionRatio>0)&&(i.unobserve(e.target),u.delete(e.target),t())}}))}),{rootMargin:"200px"}):void 0);return n?(n.observe(e),u.set(e,t),function(){try{n.unobserve(e)}catch(t){console.error(t)}u.delete(e)}):function(){}};function p(e,t,n,o){(0,a.isLocalURL)(t)&&(e.prefetch(t,n,o).catch((function(e){0})),h[t+"%"+n]=!0)}var f=function(e){var t=!1!==e.prefetch,n=s.default.useState(),r=o(n,2),i=r[0],u=r[1],f=(0,c.useRouter)(),y=f&&f.pathname||"/",g=s.default.useMemo((function(){var t=(0,a.resolveHref)(y,e.href);return{href:t,as:e.as?(0,a.resolveHref)(y,e.as):t}}),[y,e.href,e.as]),m=g.href,_=g.as;s.default.useEffect((function(){if(t&&l&&i&&i.tagName&&(0,a.isLocalURL)(m)&&!h[m+"%"+_])return d(i,(function(){p(f,m,_)}))}),[t,i,m,_,f]);var b=e.children,v=e.replace,E=e.shallow,O=e.scroll;"string"===typeof b&&(b=s.default.createElement("a",null,b));var T=s.Children.only(b),S={ref:function(e){e&&u(e),T&&"object"===typeof T&&T.ref&&("function"===typeof T.ref?T.ref(e):"object"===typeof T.ref&&(T.ref.current=e))},onClick:function(e){T.props&&"function"===typeof T.props.onClick&&T.props.onClick(e),e.defaultPrevented||function(e,t,n,o,r,i,s){("A"!==e.currentTarget.nodeName||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&(0,a.isLocalURL)(n))&&(e.preventDefault(),null==s&&(s=o.indexOf("#")<0),t[r?"replace":"push"](n,o,{shallow:i}).then((function(e){e&&s&&(window.scrollTo(0,0),document.body.focus())})))}(e,f,m,_,v,E,O)}};return t&&(S.onMouseEnter=function(e){(0,a.isLocalURL)(m)&&(T.props&&"function"===typeof T.props.onMouseEnter&&T.props.onMouseEnter(e),p(f,m,_,{priority:!0}))}),(e.passHref||"a"===T.type&&!("href"in T.props))&&(S.href=(0,a.addBasePath)(_)),s.default.cloneElement(T,S)};t.default=f},jwwS:function(e,t,n){"use strict";var o;t.__esModule=!0,t.LoadableContext=void 0;var r=((o=n("q1tI"))&&o.__esModule?o:{default:o}).default.createContext(null);t.LoadableContext=r},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},lwAK:function(e,t,n){"use strict";var o;t.__esModule=!0,t.AmpStateContext=void 0;var r=((o=n("q1tI"))&&o.__esModule?o:{default:o}).default.createContext({});t.AmpStateContext=r},sTT1:function(e,t,n){"use strict";(function(e,o){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("Po9p")),s=r(n("tpqs"));const a=function(e,t){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},o={on(e,t,o){if(void 0===n[e])throw new Error("Invalid event type: "+e);n[e].push({selector:t,fn:o})},render(e){t.store.featureChanged(e)}},r=function(e,r){const i=n[e];let s=i.length;for(;s--;){const e=i[s];if(e.selector(r)){e.fn.call(o,r),t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(o),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(e){r("drag",e)},click(e){r("click",e)},mousemove(e){r("mousemove",e)},mousedown(e){r("mousedown",e)},mouseup(e){r("mouseup",e)},mouseout(e){r("mouseout",e)},keydown(e){r("keydown",e)},keyup(e){r("keyup",e)},touchstart(e){r("touchstart",e)},touchmove(e){r("touchmove",e)},touchend(e){r("touchend",e)},tap(e){r("tap",e)}}};var c=6378137;function u(e){var t=0;if(e&&e.length>0){t+=Math.abs(l(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(l(e[n]))}return t}function l(e){var t,n,o,r,i,s,a=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(o=u-2,r=u-1,i=0):s===u-1?(o=u-1,r=0,i=1):(o=s,r=s+1,i=s+2),t=e[o],n=e[r],a+=(h(e[i][0])-h(t[0]))*Math.sin(h(n[1]));a=a*c*c/2}return a}function h(e){return e*Math.PI/180}var d=function e(t){var n,o=0;switch(t.type){case"Polygon":return u(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)o+=u(t.coordinates[n]);return o;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)o+=e(t.geometries[n]);return o}};const p={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},f={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},y={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},g={POLYGON:"polygon",LINE:"line_string",POINT:"point"},m={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},_={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},b={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},v={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},E={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},O={ACTIVE:"true",INACTIVE:"false"},T=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"];var S=Object.freeze({classes:p,sources:f,cursors:y,types:g,geojsonTypes:m,modes:_,events:b,updateActions:v,meta:E,activeStates:O,interactions:T,LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270});const C={Point:0,LineString:1,Polygon:2};function x(e,t){const n=C[e.geometry.type]-C[t.geometry.type];return 0===n&&e.geometry.type===m.POLYGON?e.area-t.area:n}function I(e){if(this._items={},this._nums={},this._length=e?e.length:0,e)for(let t=0,n=e.length;t<n;t++)this.add(e[t]),void 0!==e[t]&&("string"==typeof e[t]?this._items[e[t]]=t:this._nums[e[t]]=t)}I.prototype.add=function(e){return this.has(e)||(this._length++,"string"==typeof e?this._items[e]=this._length:this._nums[e]=this._length),this},I.prototype.delete=function(e){return!1===this.has(e)||(this._length--,delete this._items[e],delete this._nums[e]),this},I.prototype.has=function(e){return("string"==typeof e||"number"==typeof e)&&(void 0!==this._items[e]||void 0!==this._nums[e])},I.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((e,t)=>e.v-t.v).map(e=>e.k)},I.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const w=[E.FEATURE,E.MIDPOINT,E.VERTEX];var M={click:function(e,t,n){return L(e,t,n,n.options.clickBuffer)},touch:function(e,t,n){return L(e,t,n,n.options.touchBuffer)}};function L(e,t,n,o){if(null===n.map)return[];const r=e?function(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}(e,o):t,i={};n.options.styles&&(i.layers=n.options.styles.map(e=>e.id));const s=n.map.queryRenderedFeatures(r,i).filter(e=>-1!==w.indexOf(e.properties.meta)),a=new I,c=[];return s.forEach(e=>{const t=e.properties.id;a.has(t)||(a.add(t),c.push(e))}),function(e){return e.map(e=>(e.geometry.type===m.POLYGON&&(e.area=d({type:m.FEATURE,property:{},geometry:e.geometry})),e)).sort(x).map(e=>(delete e.area,e))}(c)}function P(e,t){const n=M.click(e,null,t),o={mouse:y.NONE};return n[0]&&(o.mouse=n[0].properties.active===O.ACTIVE?y.MOVE:y.POINTER,o.feature=n[0].properties.meta),-1!==t.events.currentModeName().indexOf("draw")&&(o.mouse=y.ADD),t.ui.queueMapClasses(o),t.ui.updateMapClasses(),n[0]}function N(e,t){const n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}function A(e,t,n={}){const o=null!=n.fineTolerance?n.fineTolerance:4,r=null!=n.grossTolerance?n.grossTolerance:12,i=null!=n.interval?n.interval:500;e.point=e.point||t.point,e.time=e.time||t.time;const s=N(e.point,t.point);return s<o||s<r&&t.time-e.time<i}function k(e,t,n={}){const o=null!=n.tolerance?n.tolerance:25,r=null!=n.interval?n.interval:250;return e.point=e.point||t.point,e.time=e.time||t.time,N(e.point,t.point)<o&&t.time-e.time<r}var F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function j(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function R(e,t){return e(t={exports:{}},t.exports),t.exports}var D=R((function(e){var t=e.exports=function(e,n){if(n||(n=16),void 0===e&&(e=128),e<=0)return"0";for(var o=Math.log(Math.pow(2,e))/Math.log(n),r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,e/r))/Math.log(n)*r;var i=o-Math.floor(o),s="";for(r=0;r<Math.floor(o);r++)s=Math.floor(Math.random()*n).toString(n)+s;if(i){var a=Math.pow(n,i);s=Math.floor(Math.random()*a).toString(n)+s}var c=parseInt(s,n);return c!==1/0&&c>=Math.pow(2,e)?t(e,n):s};t.rack=function(e,n,o){var r=function(r){var s=0;do{if(s++>10){if(!o)throw new Error("too many ID collisions, use more bits");e+=o}var a=t(e,n)}while(Object.hasOwnProperty.call(i,a));return i[a]=r,a},i=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=e||128,r.base=n||16,r}}));const U=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||D(),this.type=t.geometry.type};U.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},U.prototype.incomingCoords=function(e){this.setCoordinates(e)},U.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},U.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},U.prototype.setProperty=function(e,t){this.properties[e]=t},U.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:m.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},U.prototype.internal=function(e){const t={id:this.id,meta:E.FEATURE,"meta:type":this.type,active:O.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const n in this.properties)t["user_"+n]=this.properties[n];return{type:m.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const V=function(e,t){U.call(this,e,t)};(V.prototype=Object.create(U.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},V.prototype.updateCoordinate=function(e,t,n){this.coordinates=3===arguments.length?[t,n]:[e,t],this.changed()},V.prototype.getCoordinate=function(){return this.getCoordinates()};const B=function(e,t){U.call(this,e,t)};(B.prototype=Object.create(U.prototype)).isValid=function(){return this.coordinates.length>1},B.prototype.addCoordinate=function(e,t,n){this.changed();const o=parseInt(e,10);this.coordinates.splice(o,0,[t,n])},B.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))},B.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)},B.prototype.updateCoordinate=function(e,t,n){const o=parseInt(e,10);this.coordinates[o]=[t,n],this.changed()};const G=function(e,t){U.call(this,e,t),this.coordinates=this.coordinates.map(e=>e.slice(0,-1))};(G.prototype=Object.create(U.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(e=>e.length>2)},G.prototype.incomingCoords=function(e){this.coordinates=e.map(e=>e.slice(0,-1)),this.changed()},G.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()},G.prototype.addCoordinate=function(e,t,n){this.changed();const o=e.split(".").map(e=>parseInt(e,10));this.coordinates[o[0]].splice(o[1],0,[t,n])},G.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map(e=>parseInt(e,10)),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))},G.prototype.getCoordinate=function(e){const t=e.split(".").map(e=>parseInt(e,10)),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))},G.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))},G.prototype.updateCoordinate=function(e,t,n){this.changed();const o=e.split("."),r=parseInt(o[0],10),i=parseInt(o[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[t,n]};const $={MultiPoint:V,MultiLineString:B,MultiPolygon:G},J=(e,t,n,o,r)=>{const i=n.split("."),s=parseInt(i[0],10),a=i[1]?i.slice(1).join("."):null;return e[s][t](a,o,r)},q=function(e,t){if(U.call(this,e,t),delete this.coordinates,this.model=$[t.geometry.type],void 0===this.model)throw new TypeError(t.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(t.geometry.coordinates)};function H(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}(q.prototype=Object.create(U.prototype))._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map(e=>new t(this.ctx,{id:D(),type:m.FEATURE,properties:{},geometry:{coordinates:e,type:this.type.replace("Multi","")}}))},q.prototype.isValid=function(){return this.features.every(e=>e.isValid())},q.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()},q.prototype.getCoordinate=function(e){return J(this.features,"getCoordinate",e)},q.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===m.POLYGON?e.getCoordinates():e.coordinates)))},q.prototype.updateCoordinate=function(e,t,n){J(this.features,"updateCoordinate",e,t,n),this.changed()},q.prototype.addCoordinate=function(e,t,n){J(this.features,"addCoordinate",e,t,n),this.changed()},q.prototype.removeCoordinate=function(e){J(this.features,"removeCoordinate",e),this.changed()},q.prototype.getFeatures=function(){return this.features},H.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)},H.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((e,t)=>(void 0===e[t.feature_id]&&(e[t.feature_id]=!0,this._ctx.store.get(t.feature_id).changed()),e),{})},H.prototype.getSelected=function(){return this._ctx.store.getSelected()},H.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},H.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)},H.prototype.getFeature=function(e){return this._ctx.store.get(e)},H.prototype.select=function(e){return this._ctx.store.select(e)},H.prototype.deselect=function(e){return this._ctx.store.deselect(e)},H.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)},H.prototype.addFeature=function(e){return this._ctx.store.add(e)},H.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},H.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},H.prototype.setActionableState=function(e={}){const t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)},H.prototype.changeMode=function(e,t={},n={}){return this._ctx.events.changeMode(e,t,n)},H.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)},H.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)},H.prototype.featuresAt=function(e,t,n="click"){if("click"!==n&&"touch"!==n)throw new Error("invalid buffer type");return M[n](e,t,this._ctx)},H.prototype.newFeature=function(e){const t=e.geometry.type;return t===m.POINT?new V(this._ctx,e):t===m.LINE_STRING?new B(this._ctx,e):t===m.POLYGON?new G(this._ctx,e):new q(this._ctx,e)},H.prototype.isInstanceOf=function(e,t){if(e===m.POINT)return t instanceof V;if(e===m.LINE_STRING)return t instanceof B;if(e===m.POLYGON)return t instanceof G;if("MultiFeature"===e)return t instanceof q;throw new Error("Unknown feature class: "+e)},H.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)},H.prototype.onSetup=function(){},H.prototype.onDrag=function(){},H.prototype.onClick=function(){},H.prototype.onMouseMove=function(){},H.prototype.onMouseDown=function(){},H.prototype.onMouseUp=function(){},H.prototype.onMouseOut=function(){},H.prototype.onKeyUp=function(){},H.prototype.onKeyDown=function(){},H.prototype.onTouchStart=function(){},H.prototype.onTouchMove=function(){},H.prototype.onTouchEnd=function(){},H.prototype.onTap=function(){},H.prototype.onStop=function(){},H.prototype.onTrash=function(){},H.prototype.onCombineFeature=function(){},H.prototype.onUncombineFeature=function(){},H.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const Y={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},z=Object.keys(Y);function W(e){return[].concat(e).filter(e=>void 0!==e)}function X(){const e=this;if(!e.ctx.map||void 0===e.ctx.map.getSource(f.HOT))return a();const t=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:t});let n=[],o=[];e.isDirty?o=e.getAllIds():(n=e.getChangedIds().filter(t=>void 0!==e.get(t)),o=e.sources.hot.filter(t=>t.properties.id&&-1===n.indexOf(t.properties.id)&&void 0!==e.get(t.properties.id)).map(e=>e.properties.id)),e.sources.hot=[];const r=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(e=>{const t=e.properties.id||e.properties.parent;return-1===n.indexOf(t)});const i=r!==e.sources.cold.length||o.length>0;function s(n,o){const r=e.get(n).internal(t);e.ctx.events.currentModeRender(r,t=>{e.sources[o].push(t)})}if(n.forEach(e=>s(e,"hot")),o.forEach(e=>s(e,"cold")),i&&e.ctx.map.getSource(f.COLD).setData({type:m.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(f.HOT).setData({type:m.FEATURE_COLLECTION,features:e.sources.hot}),e._emitSelectionChange&&(e.ctx.map.fire(b.SELECTION_CHANGE,{features:e.getSelected().map(e=>e.toGeoJSON()),points:e.getSelectedCoordinates().map(e=>({type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:e.coordinates}}))}),e._emitSelectionChange=!1),e._deletedFeaturesToEmit.length){const t=e._deletedFeaturesToEmit.map(e=>e.toGeoJSON());e._deletedFeaturesToEmit=[],e.ctx.map.fire(b.DELETE,{features:t})}function a(){e.isDirty=!1,e.clearChangedIds()}a(),e.ctx.map.fire(b.RENDER,{})}function K(e){let t;this._features={},this._featureIds=new I,this._selectedFeatureIds=new I,this._selectedCoordinates=[],this._changedFeatureIds=new I,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]},this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,X.call(this)}))},this.isDirty=!1}function Z(e,t){const n=e._selectedCoordinates.filter(t=>e._selectedFeatureIds.has(t.feature_id));e._selectedCoordinates.length===n.length||t.silent||(e._emitSelectionChange=!0),e._selectedCoordinates=n}K.prototype.createRenderBatch=function(){const e=this.render;let t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}},K.prototype.setDirty=function(){return this.isDirty=!0,this},K.prototype.featureChanged=function(e){return this._changedFeatureIds.add(e),this},K.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},K.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},K.prototype.getAllIds=function(){return this._featureIds.values()},K.prototype.add=function(e){return this.featureChanged(e.id),this._features[e.id]=e,this._featureIds.add(e.id),this},K.prototype.delete=function(e,t={}){return W(e).forEach(e=>{this._featureIds.has(e)&&(this._featureIds.delete(e),this._selectedFeatureIds.delete(e),t.silent||-1===this._deletedFeaturesToEmit.indexOf(this._features[e])&&this._deletedFeaturesToEmit.push(this._features[e]),delete this._features[e],this.isDirty=!0)}),Z(this,t),this},K.prototype.get=function(e){return this._features[e]},K.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])},K.prototype.select=function(e,t={}){return W(e).forEach(e=>{this._selectedFeatureIds.has(e)||(this._selectedFeatureIds.add(e),this._changedFeatureIds.add(e),t.silent||(this._emitSelectionChange=!0))}),this},K.prototype.deselect=function(e,t={}){return W(e).forEach(e=>{this._selectedFeatureIds.has(e)&&(this._selectedFeatureIds.delete(e),this._changedFeatureIds.add(e),t.silent||(this._emitSelectionChange=!0))}),Z(this,t),this},K.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this},K.prototype.setSelected=function(e,t={}){return e=W(e),this.deselect(this._selectedFeatureIds.values().filter(t=>-1===e.indexOf(t)),{silent:t.silent}),this.select(e.filter(e=>!this._selectedFeatureIds.has(e)),{silent:t.silent}),this},K.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this},K.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},K.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},K.prototype.getSelected=function(){return this._selectedFeatureIds.values().map(e=>this.get(e))},K.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(e=>({coordinates:this.get(e.feature_id).getCoordinate(e.coord_path)}))},K.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)},K.prototype.setFeatureProperty=function(e,t,n){this.get(e).setProperty(t,n),this.featureChanged(e)},K.prototype.storeMapConfig=function(){T.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})},K.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})},K.prototype.getInitialConfigValue=function(e){return void 0===this._mapInitialConfig[e]||this._mapInitialConfig[e]};var Q=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)ee.call(n,o)&&(e[o]=n[o])}return e},ee=Object.prototype.hasOwnProperty;const te=["mode","feature","mouse"];function ne(e){let t=null,n=null;const o={onRemove(){return e.map.off("load",o.connect),clearInterval(n),o.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",o.connect),clearInterval(n),o.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(r){{const e=r.fire;r.fire=function(t,n){let o=arguments;return 1===e.length&&1!==arguments.length&&(o=[Q({},{type:t},n)]),e.apply(r,o)}}return e.map=r,e.events=function(e){const t=Object.keys(e.options.modes).reduce((t,n)=>(t[n]=function(e){const t=Object.keys(e);return function(n,o={}){let r={};const i=t.reduce((t,n)=>(t[n]=e[n],t),new H(n));return{start(){r=i.onSetup(o),z.forEach(t=>{const n=Y[t];let o=()=>!1;var s;e[n]&&(o=()=>!0),this.on(t,o,(s=n,function(e){i[s](r,e)}))})},stop(){i.onStop(r)},trash(){i.onTrash(r)},combineFeatures(){i.onCombineFeatures(r)},uncombineFeatures(){i.onUncombineFeatures(r)},render(e,t){i.toDisplayFeatures(r,e,t)}}}}(e.options.modes[n]),t),{});let n={},o={};const r={};let i=null,s=null;r.drag=function(t,n){n({point:t.point,time:(new Date).getTime()})?(e.ui.queueMapClasses({mouse:y.DRAG}),s.drag(t)):t.originalEvent.stopPropagation()},r.mousedrag=function(e){r.drag(e,e=>!A(n,e))},r.touchdrag=function(e){r.drag(e,e=>!k(o,e))},r.mousemove=function(t){if(1===(void 0!==t.originalEvent.buttons?t.originalEvent.buttons:t.originalEvent.which))return r.mousedrag(t);const n=P(t,e);t.featureTarget=n,s.mousemove(t)},r.mousedown=function(t){n={time:(new Date).getTime(),point:t.point};const o=P(t,e);t.featureTarget=o,s.mousedown(t)},r.mouseup=function(t){const o=P(t,e);t.featureTarget=o,A(n,{point:t.point,time:(new Date).getTime()})?s.click(t):s.mouseup(t)},r.mouseout=function(e){s.mouseout(e)},r.touchstart=function(t){if(t.originalEvent.preventDefault(),!e.options.touchEnabled)return;o={time:(new Date).getTime(),point:t.point};const n=M.touch(t,null,e)[0];t.featureTarget=n,s.touchstart(t)},r.touchmove=function(t){if(t.originalEvent.preventDefault(),e.options.touchEnabled)return s.touchmove(t),r.touchdrag(t)},r.touchend=function(t){if(t.originalEvent.preventDefault(),!e.options.touchEnabled)return;const n=M.touch(t,null,e)[0];t.featureTarget=n,k(o,{time:(new Date).getTime(),point:t.point})?s.tap(t):s.touchend(t)};const c=e=>!(8===e||46===e||e>=48&&e<=57);function u(n,o,r={}){s.stop();const c=t[n];if(void 0===c)throw new Error(n+" is not valid");i=n;const u=c(e,o);s=a(u,e),r.silent||e.map.fire(b.MODE_CHANGE,{mode:n}),e.store.setDirty(),e.store.render()}r.keydown=function(t){"mapboxgl-canvas"===(t.srcElement||t.target).classList[0]&&(8!==t.keyCode&&46!==t.keyCode||!e.options.controls.trash?c(t.keyCode)?s.keydown(t):49===t.keyCode&&e.options.controls.point?u(_.DRAW_POINT):50===t.keyCode&&e.options.controls.line_string?u(_.DRAW_LINE_STRING):51===t.keyCode&&e.options.controls.polygon&&u(_.DRAW_POLYGON):(t.preventDefault(),s.trash()))},r.keyup=function(e){c(e.keyCode)&&s.keyup(e)},r.zoomend=function(){e.store.changeZoom()},r.data=function(t){if("style"===t.dataType){const{setup:t,map:n,options:o,store:r}=e;o.styles.some(e=>n.getLayer(e.id))||(t.addLayers(),r.setDirty(),r.render())}};const l={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start(){i=e.options.defaultMode,s=a(t[i](e),e)},changeMode:u,actionable:function(t){let n=!1;Object.keys(t).forEach(e=>{if(void 0===l[e])throw new Error("Invalid action type");l[e]!==t[e]&&(n=!0),l[e]=t[e]}),n&&e.map.fire(b.ACTIONABLE,{actions:l})},currentModeName:()=>i,currentModeRender:(e,t)=>s.render(e,t),fire(e,t){r[e]&&r[e](t)},addEventListeners(){e.map.on("mousemove",r.mousemove),e.map.on("mousedown",r.mousedown),e.map.on("mouseup",r.mouseup),e.map.on("data",r.data),e.map.on("touchmove",r.touchmove),e.map.on("touchstart",r.touchstart),e.map.on("touchend",r.touchend),e.container.addEventListener("mouseout",r.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",r.keydown),e.container.addEventListener("keyup",r.keyup))},removeEventListeners(){e.map.off("mousemove",r.mousemove),e.map.off("mousedown",r.mousedown),e.map.off("mouseup",r.mouseup),e.map.off("data",r.data),e.map.off("touchmove",r.touchmove),e.map.off("touchstart",r.touchstart),e.map.off("touchend",r.touchend),e.container.removeEventListener("mouseout",r.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",r.keydown),e.container.removeEventListener("keyup",r.keyup))},trash(e){s.trash(e)},combineFeatures(){s.combineFeatures()},uncombineFeatures(){s.uncombineFeatures()},getMode:()=>i}}(e),e.ui=function(e){const t={};let n=null,o={mode:null,feature:null,mouse:null},r={mode:null,feature:null,mouse:null};function i(e){r=Q(r,e)}function s(){if(!e.container)return;const t=[],n=[];te.forEach(e=>{r[e]!==o[e]&&(t.push(`${e}-${o[e]}`),null!==r[e]&&n.push(`${e}-${r[e]}`))}),t.length>0&&e.container.classList.remove(...t),n.length>0&&e.container.classList.add(...n),o=Q(o,r)}function a(e,t={}){const o=document.createElement("button");return o.className=`${p.CONTROL_BUTTON} ${t.className}`,o.setAttribute("title",t.title),t.container.appendChild(o),o.addEventListener("click",o=>{if(o.preventDefault(),o.stopPropagation(),o.target===n)return c(),void t.onDeactivate();u(e),t.onActivate()},!0),o}function c(){n&&(n.classList.remove(p.ACTIVE_BUTTON),n=null)}function u(e){c();const o=t[e];o&&o&&"trash"!==e&&(o.classList.add(p.ACTIVE_BUTTON),n=o)}return{setActiveButton:u,queueMapClasses:i,updateMapClasses:s,clearMapClasses:function(){i({mode:null,feature:null,mouse:null}),s()},addButtons:function(){const n=e.options.controls,o=document.createElement("div");return o.className=`${p.CONTROL_GROUP} ${p.CONTROL_BASE}`,n?(n[g.LINE]&&(t[g.LINE]=a(g.LINE,{container:o,className:p.CONTROL_BUTTON_LINE,title:"LineString tool "+(e.options.keybindings?"(l)":""),onActivate:()=>e.events.changeMode(_.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),n[g.POLYGON]&&(t[g.POLYGON]=a(g.POLYGON,{container:o,className:p.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(e.options.keybindings?"(p)":""),onActivate:()=>e.events.changeMode(_.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),n[g.POINT]&&(t[g.POINT]=a(g.POINT,{container:o,className:p.CONTROL_BUTTON_POINT,title:"Marker tool "+(e.options.keybindings?"(m)":""),onActivate:()=>e.events.changeMode(_.DRAW_POINT),onDeactivate:()=>e.events.trash()})),n.trash&&(t.trash=a("trash",{container:o,className:p.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),n.combine_features&&(t.combine_features=a("combineFeatures",{container:o,className:p.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),n.uncombine_features&&(t.uncombine_features=a("uncombineFeatures",{container:o,className:p.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}})),o):o},removeButtons:function(){Object.keys(t).forEach(e=>{const n=t[e];n.parentNode&&n.parentNode.removeChild(n),delete t[e]})}}}(e),e.container=r.getContainer(),e.store=new K(e),t=e.ui.addButtons(),e.options.boxSelect&&(r.boxZoom.disable(),r.dragPan.disable(),r.dragPan.enable()),r.loaded()?o.connect():(r.on("load",o.connect),n=setInterval(()=>{r.loaded()&&o.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(f.COLD,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(f.HOT,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(t=>{e.map.addLayer(t)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(t=>{e.map.getLayer(t.id)&&e.map.removeLayer(t.id)}),e.map.getSource(f.COLD)&&e.map.removeSource(f.COLD),e.map.getSource(f.HOT)&&e.map.removeSource(f.HOT)}};return e.setup=o,o}function oe(e){return function(t){const n=t.featureTarget;return!!n&&!!n.properties&&n.properties.meta===e}}function re(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===O.ACTIVE&&e.featureTarget.properties.meta===E.FEATURE}function ie(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.active===O.INACTIVE&&e.featureTarget.properties.meta===E.FEATURE}function se(e){return void 0===e.featureTarget}function ae(e){const t=e.featureTarget;return!!t&&!!t.properties&&t.properties.meta===E.VERTEX}function ce(e){return!!e.originalEvent&&!0===e.originalEvent.shiftKey}function ue(e){return 27===e.keyCode}function le(e){return 13===e.keyCode}var he=de;function de(e,t){this.x=e,this.y=t}function pe(e,t){const n=t.getBoundingClientRect();return new he(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function fe(e,t,n,o){return{type:m.FEATURE,properties:{meta:E.VERTEX,parent:e,coord_path:n,active:o?O.ACTIVE:O.INACTIVE},geometry:{type:m.POINT,coordinates:t}}}function ye(e,t={},n=null){const{type:o,coordinates:r}=e.geometry,i=e.properties&&e.properties.id;let s=[];function a(e,n){let o="",r=null;e.forEach((e,a)=>{const u=null!=n?`${n}.${a}`:String(a),l=fe(i,e,u,c(u));if(t.midpoints&&r){const e=function(e,t,n,o){const r=t.geometry.coordinates,i=n.geometry.coordinates;if(r[1]>85||r[1]<-85||i[1]>85||i[1]<-85)return null;const s=o.project([r[0],r[1]]),a=o.project([i[0],i[1]]),c=o.unproject([(s.x+a.x)/2,(s.y+a.y)/2]);return{type:m.FEATURE,properties:{meta:E.MIDPOINT,parent:e,lng:c.lng,lat:c.lat,coord_path:n.properties.coord_path},geometry:{type:m.POINT,coordinates:[c.lng,c.lat]}}}(i,r,l,t.map);e&&s.push(e)}r=l;const h=JSON.stringify(e);o!==h&&s.push(l),0===a&&(o=h)})}function c(e){return!!t.selectedPaths&&-1!==t.selectedPaths.indexOf(e)}return o===m.POINT?s.push(fe(i,r,n,c(n))):o===m.POLYGON?r.forEach((e,t)=>{a(e,null!==n?`${n}.${t}`:String(t))}):o===m.LINE_STRING?a(r,n):0===o.indexOf(m.MULTI_PREFIX)&&function(){const n=o.replace(m.MULTI_PREFIX,"");r.forEach((o,r)=>{const i={type:m.FEATURE,properties:e.properties,geometry:{type:n,coordinates:o}};s=s.concat(ye(i,t,r))})}(),s}de.prototype={clone:function(){return new de(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),o=t*this.x-n*this.y,r=n*this.x+t*this.y;return this.x=o,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),o=Math.sin(e),r=t.x+n*(this.x-t.x)-o*(this.y-t.y),i=t.y+o*(this.x-t.x)+n*(this.y-t.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},de.convert=function(e){return e instanceof de?e:Array.isArray(e)?new de(e[0],e[1]):e};var ge={enable(e){setTimeout(()=>{e.map&&e.map.doubleClickZoom&&e._ctx&&e._ctx.store&&e._ctx.store.getInitialConfigValue&&e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{e.map&&e.map.doubleClickZoom&&e.map.doubleClickZoom.disable()},0)}},me=function(e){if(!e||!e.type)return null;var t=_e[e.type];return t?"geometry"===t?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===t?{type:"FeatureCollection",features:[e]}:"featurecollection"===t?e:void 0:null},_e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},be=R((function(e){var t=e.exports=function(e){return new n(e)};function n(e){this.value=e}function o(e,t,n){var o=[],s=[],l=!0;return function e(h){var d=n?r(h):h,p={},f=!0,y={node:d,node_:h,path:[].concat(o),parent:s[s.length-1],parents:s,key:o.slice(-1)[0],isRoot:0===o.length,level:o.length,circular:null,update:function(e,t){y.isRoot||(y.parent.node[y.key]=e),y.node=e,t&&(f=!1)},delete:function(e){delete y.parent.node[y.key],e&&(f=!1)},remove:function(e){a(y.parent.node)?y.parent.node.splice(y.key,1):delete y.parent.node[y.key],e&&(f=!1)},keys:null,before:function(e){p.before=e},after:function(e){p.after=e},pre:function(e){p.pre=e},post:function(e){p.post=e},stop:function(){l=!1},block:function(){f=!1}};if(!l)return y;function g(){if("object"==typeof y.node&&null!==y.node){y.keys&&y.node_===y.node||(y.keys=i(y.node)),y.isLeaf=0==y.keys.length;for(var e=0;e<s.length;e++)if(s[e].node_===h){y.circular=s[e];break}}else y.isLeaf=!0,y.keys=null;y.notLeaf=!y.isLeaf,y.notRoot=!y.isRoot}g();var m=t.call(y,y.node);return void 0!==m&&y.update&&y.update(m),p.before&&p.before.call(y,y.node),f?("object"!=typeof y.node||null===y.node||y.circular||(s.push(y),g(),c(y.keys,(function(t,r){o.push(t),p.pre&&p.pre.call(y,y.node[t],t);var i=e(y.node[t]);n&&u.call(y.node,t)&&(y.node[t]=i.node),i.isLast=r==y.keys.length-1,i.isFirst=0==r,p.post&&p.post.call(y,i),o.pop()})),s.pop()),p.after&&p.after.call(y,y.node),y):y}(e).node}function r(e){if("object"==typeof e&&null!==e){var t;if(a(e))t=[];else if("[object Date]"===s(e))t=new Date(e.getTime?e.getTime():e);else if(function(e){return"[object RegExp]"===s(e)}(e))t=new RegExp(e);else if(function(e){return"[object Error]"===s(e)}(e))t={message:e.message};else if(function(e){return"[object Boolean]"===s(e)}(e))t=new Boolean(e);else if(function(e){return"[object Number]"===s(e)}(e))t=new Number(e);else if(function(e){return"[object String]"===s(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},o=function(){};o.prototype=n,t=new o}return c(i(e),(function(n){t[n]=e[n]})),t}return e}n.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var o=e[n];if(!t||!u.call(t,o)){t=void 0;break}t=t[o]}return t},n.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var o=e[n];if(!t||!u.call(t,o))return!1;t=t[o]}return!0},n.prototype.set=function(e,t){for(var n=this.value,o=0;o<e.length-1;o++){var r=e[o];u.call(n,r)||(n[r]={}),n=n[r]}return n[e[o]]=t,t},n.prototype.map=function(e){return o(this.value,e,!0)},n.prototype.forEach=function(e){return this.value=o(this.value,e,!1),this.value},n.prototype.reduce=function(e,t){var n=1===arguments.length,o=n?this.value:t;return this.forEach((function(t){this.isRoot&&n||(o=e.call(this,o,t))})),o},n.prototype.paths=function(){var e=[];return this.forEach((function(t){e.push(this.path)})),e},n.prototype.nodes=function(){var e=[];return this.forEach((function(t){e.push(this.node)})),e},n.prototype.clone=function(){var e=[],t=[];return function n(o){for(var s=0;s<e.length;s++)if(e[s]===o)return t[s];if("object"==typeof o&&null!==o){var a=r(o);return e.push(o),t.push(a),c(i(o),(function(e){a[e]=n(o[e])})),e.pop(),t.pop(),a}return o}(this.value)};var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function s(e){return Object.prototype.toString.call(e)}var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};c(i(n.prototype),(function(e){t[e]=function(t){var o=[].slice.call(arguments,1),r=new n(t);return r[e].apply(r,o)}}));var u=Object.hasOwnProperty||function(e,t){return t in e}})),ve=Ee;function Ee(e){if(!(this instanceof Ee))return new Ee(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}Ee.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},Ee.prototype.equals=function(e){var t;return t=e instanceof Ee?e.bbox():e,this._bbox[0]==t[0]&&this._bbox[1]==t[1]&&this._bbox[2]==t[2]&&this._bbox[3]==t[3]},Ee.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Ee.prototype.union=function(e){var t;return this._valid=!0,t=e instanceof Ee?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[2]),this._bbox[3]=Math.max(this._bbox[3],t[3]),this},Ee.prototype.bbox=function(){return this._valid?this._bbox:null},Ee.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],n=e[1];return this._bbox[0]<=t&&this._bbox[1]<=n&&this._bbox[2]>=t&&this._bbox[3]>=n},Ee.prototype.intersect=function(e){return this._valid?(t=e instanceof Ee?e.bbox():e,!(this._bbox[0]>t[2]||this._bbox[2]<t[0]||this._bbox[3]<t[1]||this._bbox[1]>t[3])):null;var t},Ee.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},Ee.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Oe={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Te=Object.keys(Oe),Se=function(e){return Ce(e).bbox()};function Ce(e){for(var t=ve(),n=function(e){if(!e)return[];var t=function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,n){return t.concat(e(n))}),[]),t;case"Feature":return t.geometry?e(t.geometry).map((function(e){var n={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(n.id=t.id),n})):t;case"MultiPoint":return t.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return t.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return t.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return t.geometries.map(e).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}(me(e)),n=[];return t.features.forEach((function(e){e.geometry&&(n=n.concat(function e(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce((function(t,n){return Array.isArray(n)&&Array.isArray(n[0])?t.concat(e(n)):(t.push(n),t)}),[])}(e.geometry.coordinates)))})),n}(e),o=0;o<n.length;o++)t.include(n[o]);return t}Se.polygon=function(e){return Ce(e).polygon()},Se.bboxify=function(e){return be(e).map((function(e){e&&Te.some((function(t){return!!e[t]&&-1!==Oe[t].indexOf(e.type)}))&&(e.bbox=Ce(e).bbox(),this.update(e))}))};const{LAT_MIN:xe,LAT_MAX:Ie,LAT_RENDERED_MIN:we,LAT_RENDERED_MAX:Me,LNG_MIN:Le,LNG_MAX:Pe}=S;function Ne(e,t){let n=xe,o=Ie,r=xe,i=Ie,s=Pe,a=Le;e.forEach(e=>{const t=Se(e),c=t[1],u=t[3],l=t[0],h=t[2];c>n&&(n=c),u<o&&(o=u),u>r&&(r=u),c<i&&(i=c),l<s&&(s=l),h>a&&(a=h)});const c=t;return n+c.lat>Me&&(c.lat=Me-n),r+c.lat>Ie&&(c.lat=Ie-r),o+c.lat<we&&(c.lat=we-o),i+c.lat<xe&&(c.lat=xe-i),s+c.lng<=Le&&(c.lng+=360*Math.ceil(Math.abs(c.lng)/360)),a+c.lng>=Pe&&(c.lng-=360*Math.ceil(Math.abs(c.lng)/360)),c}function Ae(e,t){const n=Ne(e.map(e=>e.toGeoJSON()),t);e.forEach(e=>{const t=e.getCoordinates(),o=e=>{const t={lng:e[0]+n.lng,lat:e[1]+n.lat};return[t.lng,t.lat]},r=e=>e.map(e=>o(e));let i;e.type===m.POINT?i=o(t):e.type===m.LINE_STRING||e.type===m.MULTI_POINT?i=t.map(o):e.type===m.POLYGON||e.type===m.MULTI_LINE_STRING?i=t.map(r):e.type===m.MULTI_POLYGON&&(i=t.map(e=>e.map(e=>r(e)))),e.incomingCoords(i)})}const ke={onSetup:function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(e=>void 0!==this.getFeature(e))),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t},fireUpdate:function(){this.map.fire(b.UPDATE,{action:v.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})},fireActionable:function(){const e=this.getSelected(),t=e.filter(e=>this.isInstanceOf("MultiFeature",e));let n=!1;if(e.length>1){n=!0;const t=e[0].type.replace("Multi","");e.forEach(e=>{e.type.replace("Multi","")!==t&&(n=!1)})}const o=t.length>0,r=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:o,trash:r})},getUniqueIds:function(e){return e.length?e.map(e=>e.properties.id).filter(e=>void 0!==e).reduce((e,t)=>(e.add(t),e),new I).values():[]},stopExtendedInteractions:function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1},onStop:function(){ge.enable(this)},onMouseMove:function(e){return this.stopExtendedInteractions(e)},onMouseOut:function(e){if(e.dragMoving)return this.fireUpdate()}};ke.onTap=ke.onClick=function(e,t){return se(t)?this.clickAnywhere(e,t):oe(E.VERTEX)(t)?this.clickOnVertex(e,t):function(e){return!!e.featureTarget&&!!e.featureTarget.properties&&e.featureTarget.properties.meta===E.FEATURE}(t)?this.clickOnFeature(e,t):void 0},ke.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(e=>this.doRender(e))),ge.enable(this),this.stopExtendedInteractions(e)},ke.clickOnVertex=function(e,t){this.changeMode(_.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:y.MOVE})},ke.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},ke.clickOnFeature=function(e,t){ge.disable(this),this.stopExtendedInteractions(e);const n=ce(t),o=this.getSelectedIds(),r=t.featureTarget.properties.id,i=this.isSelected(r);if(!n&&i&&this.getFeature(r).type!==m.POINT)return this.changeMode(_.DIRECT_SELECT,{featureId:r});i&&n?(this.deselect(r),this.updateUIClasses({mouse:y.POINTER}),1===o.length&&ge.enable(this)):!i&&n?(this.select(r),this.updateUIClasses({mouse:y.MOVE})):i||n||(o.forEach(e=>this.doRender(e)),this.setSelected(r),this.updateUIClasses({mouse:y.MOVE})),this.doRender(r)},ke.onMouseDown=function(e,t){return re(t)?this.startOnActiveFeature(e,t):this.drawConfig.boxSelect&&function(e){return!!e.originalEvent&&!!e.originalEvent.shiftKey&&0===e.originalEvent.button}(t)?this.startBoxSelect(e,t):void 0},ke.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=pe(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0},ke.onTouchStart=function(e,t){if(re(t))return this.startOnActiveFeature(e,t)},ke.onDrag=function(e,t){return e.canDragMove?this.dragMove(e,t):this.drawConfig.boxSelect&&e.canBoxSelect?this.whileBoxSelect(e,t):void 0},ke.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:y.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(p.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const n=pe(t.originalEvent,this.map.getContainer()),o=Math.min(e.boxSelectStartLocation.x,n.x),r=Math.max(e.boxSelectStartLocation.x,n.x),i=Math.min(e.boxSelectStartLocation.y,n.y),s=Math.max(e.boxSelectStartLocation.y,n.y),a=`translate(${o}px, ${i}px)`;e.boxSelectElement.style.transform=a,e.boxSelectElement.style.WebkitTransform=a,e.boxSelectElement.style.width=r-o+"px",e.boxSelectElement.style.height=s-i+"px"},ke.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Ae(this.getSelected(),n),e.dragMoveLocation=t.lngLat},ke.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const n=[e.boxSelectStartLocation,pe(t.originalEvent,this.map.getContainer())],o=this.featuresAt(null,n,"click"),r=this.getUniqueIds(o).filter(e=>!this.isSelected(e));r.length&&(this.select(r),r.forEach(e=>this.doRender(e)),this.updateUIClasses({mouse:y.MOVE}))}this.stopExtendedInteractions(e)},ke.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?O.ACTIVE:O.INACTIVE,n(t),this.fireActionable(),t.properties.active===O.ACTIVE&&t.geometry.type!==m.POINT&&ye(t).forEach(n)},ke.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},ke.onCombineFeatures=function(){const e=this.getSelected();if(0===e.length||e.length<2)return;const t=[],n=[],o=e[0].type.replace("Multi","");for(let r=0;r<e.length;r++){const i=e[r];if(i.type.replace("Multi","")!==o)return;i.type.includes("Multi")?i.getCoordinates().forEach(e=>{t.push(e)}):t.push(i.getCoordinates()),n.push(i.toGeoJSON())}if(n.length>1){const e=this.newFeature({type:m.FEATURE,properties:n[0].properties,geometry:{type:"Multi"+o,coordinates:t}});this.addFeature(e),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([e.id]),this.map.fire(b.COMBINE_FEATURES,{createdFeatures:[e.toGeoJSON()],deletedFeatures:n})}this.fireActionable()},ke.onUncombineFeatures=function(){const e=this.getSelected();if(0===e.length)return;const t=[],n=[];for(let o=0;o<e.length;o++){const r=e[o];this.isInstanceOf("MultiFeature",r)&&(r.getFeatures().forEach(e=>{this.addFeature(e),e.properties=r.properties,t.push(e.toGeoJSON()),this.select([e.id])}),this.deleteFeature(r.id,{silent:!0}),n.push(r.toGeoJSON()))}t.length>1&&this.map.fire(b.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:n}),this.fireActionable()};const Fe=oe(E.VERTEX),je=oe(E.MIDPOINT),Re={fireUpdate:function(){this.map.fire(b.UPDATE,{action:v.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})},fireActionable:function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})},startDragging:function(e,t){this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat},stopDragging:function(e){this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null},onVertex:function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties,o=e.selectedCoordPaths.indexOf(n.coord_path);ce(t)||-1!==o?ce(t)&&-1===o&&e.selectedCoordPaths.push(n.coord_path):e.selectedCoordPaths=[n.coord_path];const r=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]},pathsToCoordinates:function(e,t){return t.map(t=>({feature_id:e,coord_path:t}))},onFeature:function(e,t){0===e.selectedCoordPaths.length?this.startDragging(e,t):this.stopDragging(e)},dragFeature:function(e,t,n){Ae(this.getSelected(),n),e.dragMoveLocation=t.lngLat},dragVertex:function(e,t,n){const o=e.selectedCoordPaths.map(t=>e.feature.getCoordinate(t)),r=Ne(o.map(e=>({type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:e}})),n);for(let i=0;i<o.length;i++){const t=o[i];e.feature.updateCoordinate(e.selectedCoordPaths[i],t[0]+r.lng,t[1]+r.lat)}},clickNoTarget:function(){this.changeMode(_.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(_.SIMPLE_SELECT)},clickActiveFeature:function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()},onSetup:function(e){const t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===m.POINT)throw new TypeError("direct_select mode doesn't handle point features");const o={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,o.selectedCoordPaths)),this.setSelected(t),ge.disable(this),this.setActionableState({trash:!0}),o},onStop:function(){ge.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(e,t,n){e.featureId===t.properties.id?(t.properties.active=O.ACTIVE,n(t),ye(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=O.INACTIVE,n(t)),this.fireActionable(e)},onTrash:function(e){e.selectedCoordPaths.sort((e,t)=>t.localeCompare(e,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),!1===e.feature.isValid()&&(this.deleteFeature([e.featureId]),this.changeMode(_.SIMPLE_SELECT,{}))},onMouseMove:function(e,t){const n=re(t),o=Fe(t),r=0===e.selectedCoordPaths.length;n&&r||o&&!r?this.updateUIClasses({mouse:y.MOVE}):this.updateUIClasses({mouse:y.NONE}),this.stopDragging(e)},onMouseOut:function(e){e.dragMoving&&this.fireUpdate()}};Re.onTouchStart=Re.onMouseDown=function(e,t){return Fe(t)?this.onVertex(e,t):re(t)?this.onFeature(e,t):je(t)?this.onMidpoint(e,t):void 0},Re.onDrag=function(e,t){if(!0!==e.canDragMove)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat},Re.onClick=function(e,t){return se(t)?this.clickNoTarget(e,t):re(t)?this.clickActiveFeature(e,t):ie(t)?this.clickInactive(e,t):void this.stopDragging(e)},Re.onTap=function(e,t){return se(t)?this.clickNoTarget(e,t):re(t)?this.clickActiveFeature(e,t):ie(t)?this.clickInactive(e,t):void 0},Re.onTouchEnd=Re.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const De={};function Ue(e,t){return!!e.lngLat&&e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]}De.onSetup=function(){const e=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:y.ADD}),this.activateUIButton(g.POINT),this.setActionableState({trash:!0}),{point:e}},De.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)},De.onTap=De.onClick=function(e,t){this.updateUIClasses({mouse:y.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.map.fire(b.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(_.SIMPLE_SELECT,{featureIds:[e.point.id]})},De.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})},De.toDisplayFeatures=function(e,t,n){const o=t.properties.id===e.point.id;if(t.properties.active=o?O.ACTIVE:O.INACTIVE,!o)return n(t)},De.onTrash=De.stopDrawingAndRemove,De.onKeyUp=function(e,t){if(ue(t)||le(t))return this.stopDrawingAndRemove(e,t)};const Ve={onSetup:function(){const e=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),ge.disable(this),this.updateUIClasses({mouse:y.ADD}),this.activateUIButton(g.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Ue(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(_.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:y.ADD}),e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(_.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},onMouseMove:function(e,t){e.polygon.updateCoordinate("0."+e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ae(t)&&this.updateUIClasses({mouse:y.POINTER})}};Ve.onTap=Ve.onClick=function(e,t){return ae(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)},Ve.onKeyUp=function(e,t){ue(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)):le(t)&&this.changeMode(_.SIMPLE_SELECT,{featureIds:[e.polygon.id]})},Ve.onStop=function(e){this.updateUIClasses({mouse:y.NONE}),ge.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.polygon.id)&&(e.polygon.removeCoordinate("0."+e.currentVertexPosition),e.polygon.isValid()?this.map.fire(b.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT,{},{silent:!0})))},Ve.toDisplayFeatures=function(e,t,n){const o=t.properties.id===e.polygon.id;if(t.properties.active=o?O.ACTIVE:O.INACTIVE,!o)return n(t);if(0===t.geometry.coordinates.length)return;const r=t.geometry.coordinates[0].length;if(!(r<3)){if(t.properties.meta=E.FEATURE,n(fe(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),r>3){const o=t.geometry.coordinates[0].length-3;n(fe(e.polygon.id,t.geometry.coordinates[0][o],"0."+o,!1))}if(r<=4){const e=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:m.FEATURE,properties:t.properties,geometry:{coordinates:e,type:m.LINE_STRING}}),3===r)return}return n(t)}},Ve.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)};const Be={onSetup:function(e){const t=(e=e||{}).featureId;let n,o,r="forward";if(t){if(n=this.getFeature(t),!n)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&"Feature"===i.type&&i.geometry&&"Point"===i.geometry.type&&(i=i.geometry),i&&"Point"===i.type&&i.coordinates&&2===i.coordinates.length&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=n.coordinates.length-1;if(n.coordinates[s][0]===i[0]&&n.coordinates[s][1]===i[1])o=s+1,n.addCoordinate(o,...n.coordinates[s]);else{if(n.coordinates[0][0]!==i[0]||n.coordinates[0][1]!==i[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");r="backwards",o=0,n.addCoordinate(o,...n.coordinates[0])}}else n=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.LINE_STRING,coordinates:[]}}),o=0,this.addFeature(n);return this.clearSelectedFeatures(),ge.disable(this),this.updateUIClasses({mouse:y.ADD}),this.activateUIButton(g.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:o,direction:r}},clickAnywhere:function(e,t){if(e.currentVertexPosition>0&&Ue(t,e.line.coordinates[e.currentVertexPosition-1])||"backwards"===e.direction&&Ue(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(_.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:y.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),"forward"===e.direction?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)},clickOnVertex:function(e){return this.changeMode(_.SIMPLE_SELECT,{featureIds:[e.line.id]})},onMouseMove:function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),ae(t)&&this.updateUIClasses({mouse:y.POINTER})}};Be.onTap=Be.onClick=function(e,t){if(ae(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)},Be.onKeyUp=function(e,t){le(t)?this.changeMode(_.SIMPLE_SELECT,{featureIds:[e.line.id]}):ue(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT))},Be.onStop=function(e){ge.enable(this),this.activateUIButton(),void 0!==this.getFeature(e.line.id)&&(e.line.removeCoordinate(""+e.currentVertexPosition),e.line.isValid()?this.map.fire(b.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT,{},{silent:!0})))},Be.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(_.SIMPLE_SELECT)},Be.toDisplayFeatures=function(e,t,n){const o=t.properties.id===e.line.id;if(t.properties.active=o?O.ACTIVE:O.INACTIVE,!o)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=E.FEATURE,n(fe(e.line.id,t.geometry.coordinates["forward"===e.direction?t.geometry.coordinates.length-2:1],""+("forward"===e.direction?t.geometry.coordinates.length-2:1),!1)),n(t))};var Ge={simple_select:ke,direct_select:Re,draw_point:De,draw_polygon:Ve,draw_line_string:Be};const $e={defaultMode:_.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:Ge,controls:{},userProperties:!1},Je={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},qe={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function He(e,t){return e.map(e=>e.source?e:Q(e,{id:`${e.id}.${t}`,source:"hot"===t?f.HOT:f.COLD}))}var Ye=R((function(e,t){var n="[object Arguments]",o="[object Map]",r="[object Object]",i="[object Set]",s=/^\[object .+?Constructor\]$/,a=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[n]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[o]=c["[object Number]"]=c[r]=c["[object RegExp]"]=c[i]=c["[object String]"]=c["[object WeakMap]"]=!1;var u="object"==typeof F&&F&&F.Object===Object&&F,l="object"==typeof self&&self&&self.Object===Object&&self,h=u||l||Function("return this")(),d=t&&!t.nodeType&&t,p=d&&e&&!e.nodeType&&e,f=p&&p.exports===d,y=f&&u.process,g=function(){try{return y&&y.binding&&y.binding("util")}catch(e){}}(),m=g&&g.isTypedArray;function _(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}function b(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function v(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var E,O,T,S=Array.prototype,C=Function.prototype,x=Object.prototype,I=h["__core-js_shared__"],w=C.toString,M=x.hasOwnProperty,L=(E=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",P=x.toString,N=RegExp("^"+w.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=f?h.Buffer:void 0,k=h.Symbol,j=h.Uint8Array,R=x.propertyIsEnumerable,D=S.splice,U=k?k.toStringTag:void 0,V=Object.getOwnPropertySymbols,B=A?A.isBuffer:void 0,G=(O=Object.keys,T=Object,function(e){return O(T(e))}),$=fe(h,"DataView"),J=fe(h,"Map"),q=fe(h,"Promise"),H=fe(h,"Set"),Y=fe(h,"WeakMap"),z=fe(Object,"create"),W=_e($),X=_e(J),K=_e(q),Z=_e(H),Q=_e(Y),ee=k?k.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new re;++t<n;)this.add(e[t])}function se(e){var t=this.__data__=new oe(e);this.size=t.size}function ae(e,t){for(var n=e.length;n--;)if(be(e[n][0],t))return n;return-1}function ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":U&&U in Object(e)?function(e){var t=M.call(e,U),n=e[U];try{e[U]=void 0;var o=!0}catch(e){}var r=P.call(e);return o&&(t?e[U]=n:delete e[U]),r}(e):function(e){return P.call(e)}(e)}function ue(e){return xe(e)&&ce(e)==n}function le(e,t,s,a,c){return e===t||(null==e||null==t||!xe(e)&&!xe(t)?e!=e&&t!=t:function(e,t,s,a,c,u){var l=Ee(e),h=Ee(t),d=l?"[object Array]":ge(e),p=h?"[object Array]":ge(t),f=(d=d==n?r:d)==r,y=(p=p==n?r:p)==r,g=d==p;if(g&&Oe(e)){if(!Oe(t))return!1;l=!0,f=!1}if(g&&!f)return u||(u=new se),l||Ie(e)?he(e,t,s,a,c,u):function(e,t,n,r,s,a,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new j(e),new j(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return be(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var u=b;case i:var l=1&r;if(u||(u=v),e.size!=t.size&&!l)return!1;var h=c.get(e);if(h)return h==t;r|=2,c.set(e,t);var d=he(u(e),u(t),r,s,a,c);return c.delete(e),d;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,d,s,a,c,u);if(!(1&s)){var m=f&&M.call(e,"__wrapped__"),_=y&&M.call(t,"__wrapped__");if(m||_){var E=m?e.value():e,O=_?t.value():t;return u||(u=new se),c(E,O,s,a,u)}}return!!g&&(u||(u=new se),function(e,t,n,o,r,i){var s=1&n,a=de(e),c=a.length;if(c!=de(t).length&&!s)return!1;for(var u=c;u--;){var l=a[u];if(!(s?l in t:M.call(t,l)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var d=!0;i.set(e,t),i.set(t,e);for(var p=s;++u<c;){var f=e[l=a[u]],y=t[l];if(o)var g=s?o(y,f,l,t,e,i):o(f,y,l,e,t,i);if(!(void 0===g?f===y||r(f,y,n,o,i):g)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var m=e.constructor,_=t.constructor;m!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return i.delete(e),i.delete(t),d}(e,t,s,a,c,u))}(e,t,s,a,le,c))}function he(e,t,n,o,r,i){var s=1&n,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var u=i.get(e);if(u&&i.get(t))return u==t;var l=-1,h=!0,d=2&n?new ie:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var p=e[l],f=t[l];if(o)var y=s?o(f,p,l,t,e,i):o(p,f,l,e,t,i);if(void 0!==y){if(y)continue;h=!1;break}if(d){if(!_(t,(function(e,t){if(s=t,!d.has(s)&&(p===e||r(p,e,n,o,i)))return d.push(t);var s}))){h=!1;break}}else if(p!==f&&!r(p,f,n,o,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function de(e){return function(e,t,n){var o=t(e);return Ee(e)?o:function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}(o,n(e))}(e,we,ye)}function pe(e,t){var n,o,r=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function fe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ce(e)||function(e){return!!L&&L in e}(e))&&(Te(e)?N:s).test(_e(e))}(n)?n:void 0}ne.prototype.clear=function(){this.__data__=z?z(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(z){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return M.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return z?void 0!==t[e]:M.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=z&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[],this.size=0},oe.prototype.delete=function(e){var t=this.__data__,n=ae(t,e);return!(n<0)&&(n==t.length-1?t.pop():D.call(t,n,1),--this.size,!0)},oe.prototype.get=function(e){var t=this.__data__,n=ae(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return ae(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,o=ae(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this},re.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(J||oe),string:new ne}},re.prototype.delete=function(e){var t=pe(this,e).delete(e);return this.size-=t?1:0,t},re.prototype.get=function(e){return pe(this,e).get(e)},re.prototype.has=function(e){return pe(this,e).has(e)},re.prototype.set=function(e,t){var n=pe(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this},ie.prototype.add=ie.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ie.prototype.has=function(e){return this.__data__.has(e)},se.prototype.clear=function(){this.__data__=new oe,this.size=0},se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var o=n.__data__;if(!J||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new re(o)}return n.set(e,t),this.size=n.size,this};var ye=V?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var s=e[n];t(s)&&(i[r++]=s)}return i}(V(e),(function(t){return R.call(e,t)})))}:function(){return[]},ge=ce;function me(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||a.test(e))&&e>-1&&e%1==0&&e<t}function _e(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function be(e,t){return e===t||e!=e&&t!=t}($&&"[object DataView]"!=ge(new $(new ArrayBuffer(1)))||J&&ge(new J)!=o||q&&"[object Promise]"!=ge(q.resolve())||H&&ge(new H)!=i||Y&&"[object WeakMap]"!=ge(new Y))&&(ge=function(e){var t=ce(e),n=t==r?e.constructor:void 0,s=n?_e(n):"";if(s)switch(s){case W:return"[object DataView]";case X:return o;case K:return"[object Promise]";case Z:return i;case Q:return"[object WeakMap]"}return t});var ve=ue(function(){return arguments}())?ue:function(e){return xe(e)&&M.call(e,"callee")&&!R.call(e,"callee")},Ee=Array.isArray,Oe=B||function(){return!1};function Te(e){if(!Ce(e))return!1;var t=ce(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Se(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ce(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function xe(e){return null!=e&&"object"==typeof e}var Ie=m?function(e){return function(t){return e(t)}}(m):function(e){return xe(e)&&Se(e.length)&&!!c[ce(e)]};function we(e){return null!=(t=e)&&Se(t.length)&&!Te(t)?function(e,t){var n=Ee(e),o=!n&&ve(e),r=!n&&!o&&Oe(e),i=!n&&!o&&!r&&Ie(e),s=n||o||r||i,a=s?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],c=a.length;for(var u in e)!t&&!M.call(e,u)||s&&("length"==u||r&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||me(u,c))||a.push(u);return a}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||x))return G(e);var t,n,o=[];for(var r in Object(e))M.call(e,r)&&"constructor"!=r&&o.push(r);return o}(e);var t}e.exports=function(e,t){return le(e,t)}})),ze=R((function(e,t){var n=function(){var e=function(e,t,n,o){for(n=n||{},o=e.length;o--;n[e[o]]=t);return n},t=[1,12],n=[1,13],o=[1,9],r=[1,10],i=[1,11],s=[1,14],a=[1,15],c=[14,18,22,24],u=[18,22],l=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,n,o,r,i,s){var a=i.length-1;switch(r){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=i[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[a-2],i[a]];break;case 16:this.$={},this.$[i[a][0]]=i[a][1];break;case 17:this.$=i[a-2],void 0!==i[a-2][i[a][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(i[a][0])),i[a-2][i[a][0]]=i[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[a]];break;case 21:this.$=i[a-2],i[a-2].push(i[a])}},table:[{3:5,4:t,5:6,6:n,7:3,8:o,9:4,10:r,11:i,12:1,13:2,15:7,16:8,17:s,23:a},{1:[3]},{14:[1,16]},e(c,[2,7]),e(c,[2,8]),e(c,[2,9]),e(c,[2,10]),e(c,[2,11]),e(c,[2,12]),e(c,[2,3]),e(c,[2,4]),e(c,[2,5]),e([14,18,21,22,24],[2,1]),e(c,[2,2]),{3:20,4:t,18:[1,17],19:18,20:19},{3:5,4:t,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:23,15:7,16:8,17:s,23:a,24:[1,21],25:22},{1:[2,6]},e(c,[2,13]),{18:[1,24],22:[1,25]},e(u,[2,16]),{21:[1,26]},e(c,[2,18]),{22:[1,28],24:[1,27]},e(l,[2,20]),e(c,[2,14]),{3:20,4:t,20:29},{3:5,4:t,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:30,15:7,16:8,17:s,23:a},e(c,[2,19]),{3:5,4:t,5:6,6:n,7:3,8:o,9:4,10:r,11:i,13:31,15:7,16:8,17:s,23:a},e(u,[2,17]),e(u,[2,15]),e(l,[2,21])],defaultActions:{16:[2,6]},parseError:function(e,t){if(!t.recoverable){function n(e,t){this.message=e,this.hash=t}throw n.prototype=Error,new n(e,t)}this.trace(e)},parse:function(e){var t=this,n=[0],o=[null],r=[],i=this.table,s="",a=0,c=0,u=2,l=1,h=r.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(e,p.yy),p.yy.lexer=d,p.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var y=d.yylloc;r.push(y);var g=d.options&&d.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,_,b,v,E,O,T,S,C,x=function(){var e;return"number"!=typeof(e=d.lex()||l)&&(e=t.symbols_[e]||e),e},I={};;){if(b=n[n.length-1],this.defaultActions[b]?v=this.defaultActions[b]:(null==m&&(m=x()),v=i[b]&&i[b][m]),void 0===v||!v.length||!v[0]){var w="";for(O in C=[],i[b])this.terminals_[O]&&O>u&&C.push("'"+this.terminals_[O]+"'");w=d.showPosition?"Parse error on line "+(a+1)+":\n"+d.showPosition()+"\nExpecting "+C.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(a+1)+": Unexpected "+(m==l?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(w,{text:d.match,token:this.terminals_[m]||m,line:d.yylineno,loc:y,expected:C})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+m);switch(v[0]){case 1:n.push(m),o.push(d.yytext),r.push(d.yylloc),n.push(v[1]),m=null,_?(m=_,_=null):(c=d.yyleng,s=d.yytext,a=d.yylineno,y=d.yylloc);break;case 2:if(T=this.productions_[v[1]][1],I.$=o[o.length-T],I._$={first_line:r[r.length-(T||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(T||1)].first_column,last_column:r[r.length-1].last_column},g&&(I._$.range=[r[r.length-(T||1)].range[0],r[r.length-1].range[1]]),void 0!==(E=this.performAction.apply(I,[s,c,a,p.yy,v[1],o,r].concat(h))))return E;T&&(n=n.slice(0,-1*T*2),o=o.slice(0,-1*T),r=r.slice(0,-1*T)),n.push(this.productions_[v[1]][0]),o.push(I.$),r.push(I._$),S=i[n[n.length-2]][n[n.length-1]],n.push(S);break;case 3:return!0}}return!0}},d={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===o.length?this.yylloc.first_column:0)+o[o.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,o,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(o=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,o;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if((n=this._input.match(this.rules[r[i]]))&&(!t||n[0].length>t[0].length)){if(t=n,o=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,r[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,r[o]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,o){switch(n){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function p(){this.yy={}}return h.lexer=d,p.prototype=h,h.Parser=p,new p}();t.parser=n,t.Parser=n.Parser,t.parse=function(){return n.parse.apply(n,arguments)},t.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),o.exit(1));var n=i.readFileSync(s.normalize(e[1]),"utf8");return t.parser.parse(n)},j.main===e&&t.main(o.argv.slice(1))}));function We(e){return e*Math.PI/180}function Xe(e){var t=0;if(e.length>2)for(var n,o,r=0;r<e.length-1;r++)n=e[r],t+=We((o=e[r+1])[0]-n[0])*(2+Math.sin(We(n[1]))+Math.sin(We(o[1])));return t>=0}function Ke(e){if(e&&e.length>0){if(Xe(e[0]))return!1;if(!e.slice(1,e.length).every(Xe))return!1}return!0}ze.parser,ze.Parser,ze.parse,ze.main;var Ze=function(e,t){(function(e){return"Polygon"===e.type?Ke(e.coordinates):"MultiPolygon"===e.type?e.coordinates.every(Ke):void 0})(e)||t.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:e.__line__})},Qe=function(e,t){var n=[],o=0;function r(e){if(t&&!1===t.noDuplicateMembers||!e.__duplicateProperties__||n.push({message:"An object contained duplicate members, making parsing ambigous: "+e.__duplicateProperties__.join(", "),line:e.__line__}),!s(e,"type","string"))if(d[e.type])e&&d[e.type](e);else{var o=p[e.type.toLowerCase()];void 0!==o?n.push({message:"Expected "+o+" but got "+e.type+" (case sensitive)",line:e.__line__}):n.push({message:"The type "+e.type+" is unknown",line:e.__line__})}}function i(e,t){return e.every((function(e){return null!==e&&typeof e===t}))}function s(e,t,o){if(void 0===e[t])return n.push({message:'"'+t+'" member required',line:e.__line__});if("array"===o){if(!Array.isArray(e[t]))return n.push({message:'"'+t+'" member should be an array, but is an '+typeof e[t]+" instead",line:e.__line__})}else{if("object"===o&&e[t]&&e[t].constructor!==Object)return n.push({message:'"'+t+'" member should be '+o+", but is an "+e[t].constructor.name+" instead",line:e.__line__});if(o&&typeof e[t]!==o)return n.push({message:'"'+t+'" member should be '+o+", but is an "+typeof e[t]+" instead",line:e.__line__})}}function a(e,r){if(!Array.isArray(e))return n.push({message:"position should be an array, is a "+typeof e+" instead",line:e.__line__||r});if(e.length<2)return n.push({message:"position must have 2 or more elements",line:e.__line__||r});if(e.length>3)return n.push({message:"position should not have more than 3 elements",level:"message",line:e.__line__||r});if(!i(e,"number"))return n.push({message:"each element in a position must be a number",line:e.__line__||r});if(t&&t.precisionWarning){if(10===o)return o+=1,n.push({message:"truncated warnings: we've encountered coordinate precision warning 10 times, no more warnings will be reported",level:"message",line:e.__line__||r});o<10&&e.forEach((function(t){var i=0,s=String(t).split(".")[1];if(void 0!==s&&(i=s.length),i>6)return o+=1,n.push({message:"precision of coordinates should be reduced",level:"message",line:e.__line__||r})}))}}function c(e,t,o,r){if(void 0===r&&void 0!==e.__line__&&(r=e.__line__),0===o)return a(e,r);if(1===o&&t)if("LinearRing"===t){if(!Array.isArray(e[e.length-1]))return n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r}),!0;if(e.length<4&&n.push({message:"a LinearRing of coordinates needs to have four or more positions",line:r}),e.length&&(e[e.length-1].length!==e[0].length||!e[e.length-1].every((function(t,n){return e[0][n]===t}))))return n.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:r}),!0}else if("Line"===t&&e.length<2)return n.push({message:"a line needs to have two or more coordinates to be valid",line:r});if(Array.isArray(e))return e.map((function(e){return c(e,t,o-1,e.__line__||r)})).some((function(e){return e}));n.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:r})}function u(e){e.crs&&("object"==typeof e.crs&&e.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===e.crs.properties.name?n.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:e.__line__}):n.push({message:"old-style crs member is not recommended",line:e.__line__}))}function l(e){if(e.bbox)return Array.isArray(e.bbox)?(i(e.bbox,"number")||n.push({message:"each element in a bbox member must be a number",line:e.bbox.__line__}),4!==e.bbox.length&&6!==e.bbox.length&&n.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:e.bbox.__line__}),n.length):void n.push({message:"bbox member must be an array of numbers, but is a "+typeof e.bbox,line:e.__line__})}function h(e){u(e),l(e),void 0!==e.id&&"string"!=typeof e.id&&"number"!=typeof e.id&&n.push({message:'Feature "id" member must have a string or number value',line:e.__line__}),void 0!==e.features&&n.push({message:'Feature object cannot contain a "features" member',line:e.__line__}),void 0!==e.coordinates&&n.push({message:'Feature object cannot contain a "coordinates" member',line:e.__line__}),"Feature"!==e.type&&n.push({message:"GeoJSON features must have a type=feature member",line:e.__line__}),s(e,"properties","object"),s(e,"geometry","object")||e.geometry&&r(e.geometry)}var d={Point:function(e){var t;u(e),l(e),void 0!==(t=e).properties&&n.push({message:'geometry object cannot contain a "properties" member',line:t.__line__}),void 0!==t.geometry&&n.push({message:'geometry object cannot contain a "geometry" member',line:t.__line__}),void 0!==t.features&&n.push({message:'geometry object cannot contain a "features" member',line:t.__line__}),s(e,"coordinates","array")||a(e.coordinates)},Feature:h,MultiPoint:function(e){u(e),l(e),s(e,"coordinates","array")||c(e.coordinates,"",1)},LineString:function(e){u(e),l(e),s(e,"coordinates","array")||c(e.coordinates,"Line",1)},MultiLineString:function(e){u(e),l(e),s(e,"coordinates","array")||c(e.coordinates,"Line",2)},FeatureCollection:function(e){if(u(e),l(e),void 0!==e.properties&&n.push({message:'FeatureCollection object cannot contain a "properties" member',line:e.__line__}),void 0!==e.coordinates&&n.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:e.__line__}),!s(e,"features","array")){if(!i(e.features,"object"))return n.push({message:"Every feature must be an object",line:e.__line__});e.features.forEach(h)}},GeometryCollection:function(e){u(e),l(e),s(e,"geometries","array")||(i(e.geometries,"object")||n.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:e.__line__}),1===e.geometries.length&&n.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:e.geometries.__line__}),e.geometries.forEach((function(t){t&&("GeometryCollection"===t.type&&n.push({message:"GeometryCollection should avoid nested geometry collections",line:e.geometries.__line__}),r(t))})))},Polygon:function(e){u(e),l(e),s(e,"coordinates","array")||c(e.coordinates,"LinearRing",2)||Ze(e,n)},MultiPolygon:function(e){u(e),l(e),s(e,"coordinates","array")||c(e.coordinates,"LinearRing",3)||Ze(e,n)}},p=Object.keys(d).reduce((function(e,t){return e[t.toLowerCase()]=t,e}),{});return"object"!=typeof e||null==e?(n.push({message:"The root of a GeoJSON object must be an object.",line:0}),n):(r(e),n.forEach((function(e){({}).hasOwnProperty.call(e,"line")&&void 0===e.line&&delete e.line})),n)},et=function(e,t){var n,o=[];if("object"==typeof e)n=e;else{if("string"!=typeof e)return[{message:"Expected string or object as input",line:0}];try{n=ze.parse(e)}catch(e){var r=e.message.match(/line (\d+)/);return[{line:parseInt(r[1],10)-1,message:e.message,error:e}]}}return o.concat(Qe(n,t))};const tt={Polygon:G,LineString:B,Point:V,MultiPolygon:q,MultiLineString:q,MultiPoint:q};const nt=function(e,t){const n={options:e=function(e={}){let t=Q(e);return e.controls||(t.controls={}),!1===e.displayControlsDefault?t.controls=Q(qe,e.controls):t.controls=Q(Je,e.controls),t=Q($e,t),t.styles=He(t.styles,"cold").concat(He(t.styles,"hot")),t}(e)};t=function(e,t){return t.modes=_,t.getFeatureIdsAt=function(t){return M.click({point:t},null,e).map(e=>e.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:m.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(t=>e.store.get(t)).map(e=>e.toGeoJSON())}},t.getSelectedPoints=function(){return{type:m.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(e=>({type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:e.coordinates}}))}},t.set=function(n){if(void 0===n.type||n.type!==m.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");const o=e.store.createRenderBatch();let r=e.store.getAllIds().slice();const i=t.add(n),s=new I(i);return r=r.filter(e=>!s.has(e)),r.length&&t.delete(r),o(),i},t.add=function(t){const n=et(t,{precisionWarning:!1}).filter(e=>"message"!==e.level);if(n.length)throw new Error(n[0].message);const o=JSON.parse(JSON.stringify(me(t))).features.map(t=>{if(t.id=t.id||D(),null===t.geometry)throw new Error("Invalid geometry: null");if(void 0===e.store.get(t.id)||e.store.get(t.id).type!==t.geometry.type){const n=tt[t.geometry.type];if(void 0===n)throw new Error(`Invalid geometry type: ${t.geometry.type}.`);const o=new n(e,t);e.store.add(o)}else{const n=e.store.get(t.id);n.properties=t.properties,Ye(n.getCoordinates(),t.geometry.coordinates)||n.incomingCoords(t.geometry.coordinates)}return t.id});return e.store.render(),o},t.get=function(t){const n=e.store.get(t);if(n)return n.toGeoJSON()},t.getAll=function(){return{type:m.FEATURE_COLLECTION,features:e.store.getAll().map(e=>e.toGeoJSON())}},t.delete=function(n){return e.store.delete(n,{silent:!0}),t.getMode()!==_.DIRECT_SELECT||e.store.getSelectedIds().length?e.store.render():e.events.changeMode(_.SIMPLE_SELECT,void 0,{silent:!0}),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:!0}),t.getMode()===_.DIRECT_SELECT?e.events.changeMode(_.SIMPLE_SELECT,void 0,{silent:!0}):e.store.render(),t},t.changeMode=function(n,o={}){return n===_.SIMPLE_SELECT&&t.getMode()===_.SIMPLE_SELECT?(r=o.featureIds||[],i=e.store.getSelectedIds(),r.length===i.length&&JSON.stringify(r.map(e=>e).sort())===JSON.stringify(i.map(e=>e).sort())||(e.store.setSelected(o.featureIds,{silent:!0}),e.store.render()),t):(n===_.DIRECT_SELECT&&t.getMode()===_.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,o,{silent:!0}),t);var r,i},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:!0}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:!0}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:!0}),t},t.setFeatureProperty=function(n,o,r){return e.store.setFeatureProperty(n,o,r),t},t}(n,t),n.api=t;const o=ne(n);return t.onAdd=o.onAdd,t.onRemove=o.onRemove,t.types=g,t.options=e,t};function ot(e){nt(e,this)}ot.modes=Ge,t.default=ot}).call(this,n("yLpj"),n("8oxB"))},tpqs:function(e,t,n){(function(e){function n(e,t){for(var n=0,o=e.length-1;o>=0;o--){var r=e[o];"."===r?e.splice(o,1):".."===r?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function o(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return(r?"/":"")+(t=n(o(t.split("/"),(function(e){return!!e})),!r).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===r(e,-1);return(e=n(o(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(o(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=o(e.split("/")),i=o(n.split("/")),s=Math.min(r.length,i.length),a=s,c=0;c<s;c++)if(r[c]!==i[c]){a=c;break}var u=[];for(c=a;c<r.length;c++)u.push("..");return(u=u.concat(i.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,r=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!r){o=i;break}}else r=!1;return-1===o?n?"/":".":n&&1===o?"/":e.slice(0,o)},t.basename=function(e,t){var n=function(e){"string"!==typeof e&&(e+="");var t,n=0,o=-1,r=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!r){n=t+1;break}}else-1===o&&(r=!1,o=t+1);return-1===o?"":e.slice(n,o)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,o=-1,r=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===o&&(r=!1,o=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!r){n=s+1;break}}return-1===t||-1===o||0===i||1===i&&t===o-1&&t===n+1?"":e.slice(t,o)};var r="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("8oxB"))},vRNQ:function(e,t,n){e.exports={container:"Home_container__1EcsU",main:"Home_main__1x8gC",mapboxmap:"Home_mapboxmap__3Top-"}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("RNiq")}])},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(o){"object"===typeof window&&(n=window)}e.exports=n}},[["vlRD",0,1,2]]]);